# Build Job - Next.js Production Build
# L√§uft nach erfolgreicher lint stage

build:
  stage: build
  script:
    - echo "üèóÔ∏è Building Next.js application..."
    - pnpm build
    - echo "‚úÖ Build completed successfully"
  artifacts:
    paths:
      - .next/
    expire_in: 1 hour
    reports:
      # F√ºr zuk√ºnftige Bundle-Analyse
      dotenv: build.env
  rules:
    - if: $CI_PIPELINE_SOURCE == "merge_request_event"
    - if: $CI_COMMIT_BRANCH == $CI_DEFAULT_BRANCH
  # Build l√§uft nur wenn lint stage erfolgreich war
  needs:
    - prettier
    - eslint